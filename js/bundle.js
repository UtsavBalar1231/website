!function(){"use strict";if(window.syntaxHighlighter=new class{constructor(){this.wasmModule=null,this.isLoaded=!1,this.pendingBlocks=[]}async init(){if(!this.isLoaded)try{const t="/js/syntax_highlighter.js",e=await import(t);await e.default(),this.wasmModule=e,this.isLoaded=!0,this.processPendingBlocks()}catch(t){}}highlightAll(){if(this.isLoaded&&this.wasmModule)try{this.wasmModule.highlight_all_code_blocks()}catch(t){}else this.pendingBlocks.push(()=>this.highlightAll())}processPendingBlocks(){for(;this.pendingBlocks.length>0;){this.pendingBlocks.shift()()}}onThemeChange(){this.isLoaded&&setTimeout(()=>this.highlightAll(),50)}},"loading"===document.readyState?document.addEventListener("DOMContentLoaded",()=>{window.syntaxHighlighter.init().then(()=>{window.syntaxHighlighter.highlightAll()})}):window.syntaxHighlighter.init().then(()=>{window.syntaxHighlighter.highlightAll()}),window.portfolioApp?.themeManager){const t=window.portfolioApp.themeManager.setTheme;window.portfolioApp.themeManager.setTheme=function(e){t.call(this,e),window.syntaxHighlighter.onThemeChange()}}window.highlightAllCodeBlocks=()=>{window.syntaxHighlighter.isLoaded&&window.syntaxHighlighter.highlightAll()},function(){class t{constructor(){this.themes=["classic-dark","light","hacker-green","matrix","solarized-dark"],this.currentTheme=this.getStoredTheme()||this.getSystemTheme(),this.init()}init(){this.setTheme(this.currentTheme),this.bindThemeButtons(),this.detectSystemThemeChange()}getStoredTheme(){return localStorage.getItem("portfolio-theme")}getSystemTheme(){return window.matchMedia("(prefers-color-scheme: light)").matches?"light":"classic-dark"}setTheme(t){this.themes.includes(t)||(t="classic-dark"),document.documentElement.setAttribute("data-theme",t),localStorage.setItem("portfolio-theme",t),this.currentTheme=t,this.updateActiveButton(t)}updateActiveButton(t){document.querySelectorAll(".theme-btn").forEach(e=>{e.classList.toggle("active",e.dataset.theme===t)})}bindThemeButtons(){document.querySelectorAll(".theme-btn").forEach(t=>{t.addEventListener("click",()=>{this.setTheme(t.dataset.theme)})})}detectSystemThemeChange(){window.matchMedia("(prefers-color-scheme: light)").addEventListener("change",t=>{this.getStoredTheme()||this.setTheme(t.matches?"light":"classic-dark")})}}class e{constructor(){this.isLoading=!1,this.init()}init(){this.bindNavigation(),this.handlePopState()}bindNavigation(){document.addEventListener("click",t=>{const e=t.target.closest("a");e&&this.isInternalLink(e)&&!t.ctrlKey&&!t.metaKey&&(t.preventDefault(),this.navigate(e.href))})}isInternalLink(t){return t.hostname===window.location.hostname&&!t.hasAttribute("target")&&!t.href.includes("#")}async navigate(t){if(!this.isLoading&&t!==window.location.href){this.isLoading=!0,this.showLoadingState();try{const e=await fetch(t);if(!e.ok)throw new Error("Page not found");const i=await e.text(),n=(new DOMParser).parseFromString(i,"text/html"),s=n.querySelector(".terminal-content"),a=document.querySelector(".terminal-content");if(s&&a){await this.fadeOut(a),a.innerHTML=s.innerHTML,await this.fadeIn(a),document.title=n.title;const e=n.querySelector('meta[name="description"]');if(e){const t=document.querySelector('meta[name="description"]');t&&(t.content=e.content)}window.history.pushState({},"",t),this.updateActiveNavigation(t),window.scrollTo({top:0,behavior:"smooth"})}}catch(e){window.location.href=t}finally{this.isLoading=!1,this.hideLoadingState()}}}fadeOut(t){return new Promise(e=>{t.style.transition="opacity 0.2s ease-out",t.style.opacity="0",setTimeout(e,200)})}fadeIn(t){return new Promise(e=>{t.style.opacity="1",setTimeout(()=>{t.style.transition="",e()},200)})}updateActiveNavigation(t){const e=new URL(t).pathname;document.querySelectorAll(".nav-link").forEach(t=>{const i=new URL(t.href).pathname;t.classList.toggle("nav-active",i===e)})}showLoadingState(){const t=document.querySelector(".cursor");t&&(t.style.animation="blink 0.5s infinite")}hideLoadingState(){const t=document.querySelector(".cursor");t&&(t.style.animation="blink 1s infinite")}handlePopState(){window.addEventListener("popstate",t=>{this.navigate(window.location.href)})}}class i{constructor(){this.shortcuts={KeyT:()=>this.cycleTheme(),KeyH:()=>this.navigateHome(),KeyA:()=>this.navigateAbout(),KeyP:()=>this.navigateProjects(),KeyR:()=>this.navigateResume(),KeyC:()=>this.navigateContact()},this.init()}init(){document.addEventListener("keydown",t=>{if(t.ctrlKey||t.metaKey||t.altKey)return;if("INPUT"===t.target.tagName||"TEXTAREA"===t.target.tagName)return;const e=this.shortcuts[t.code];e&&(t.preventDefault(),e())})}cycleTheme(){const t=window.portfolioApp?.themeManager;if(!t)return;const e=t.themes,i=(e.indexOf(t.currentTheme)+1)%e.length;t.setTheme(e[i])}navigateHome(){this.navigate("/")}navigateAbout(){this.navigate("/about/")}navigateProjects(){this.navigate("/projects/")}navigateResume(){this.navigate("/resume/")}navigateContact(){this.navigate("/contact/")}navigate(t){const e=window.portfolioApp?.router;e?e.navigate(window.location.origin+t):window.location.href=t}}class n{constructor(){this.init()}init(){this.preloadCriticalPages(),this.lazyLoadImages(),this.prefetchOnHover()}preloadCriticalPages(){const t=["/about/","/projects/","/resume/"];"requestIdleCallback"in window&&requestIdleCallback(()=>{t.forEach(t=>this.preloadPage(t))})}preloadPage(t){const e=document.createElement("link");e.rel="prefetch",e.href=t,document.head.appendChild(e)}lazyLoadImages(){if("IntersectionObserver"in window){const t=new IntersectionObserver(e=>{e.forEach(e=>{if(e.isIntersecting){const i=e.target;i.dataset.src&&(i.src=i.dataset.src,i.removeAttribute("data-src"),t.unobserve(i))}})});document.querySelectorAll("img[data-src]").forEach(e=>{t.observe(e)})}}prefetchOnHover(){const t=new Set;document.addEventListener("mouseover",e=>{const i=e.target.closest("a");i&&this.isInternalLink(i)&&!t.has(i.href)&&(t.add(i.href),this.preloadPage(i.href))})}isInternalLink(t){return t.hostname===window.location.hostname&&!t.href.includes("#")}}class s{constructor(){this.init()}init(){this.addTypingEffects(),this.addScrollAnimations()}addTypingEffects(){document.querySelectorAll(".terminal-line .command").forEach((t,e)=>{this.typeWriter(t,100*e)})}typeWriter(t,e=0){if(!t||t.classList.contains("typed"))return;const i=t.textContent;t.textContent="",t.classList.add("typed"),setTimeout(()=>{let e=0;const n=setInterval(()=>{e<i.length?(t.textContent+=i.charAt(e),e++):clearInterval(n)},50)},e)}addScrollAnimations(){if("IntersectionObserver"in window){const t=new IntersectionObserver(e=>{e.forEach(e=>{e.isIntersecting&&(e.target.classList.add("animate-on-scroll"),t.unobserve(e.target))})},{threshold:.1});document.querySelectorAll(".project-section, h2, h3").forEach(e=>{t.observe(e)})}}}class a{constructor(){this.init()}init(){this.addHoverEffects(),this.addClickFeedback(),this.enhanceNavigation()}addHoverEffects(){document.querySelectorAll(".project-section, .skill-category").forEach(t=>{t.classList.add("interactive-element")})}addClickFeedback(){document.addEventListener("click",t=>{const e=t.target.closest("button, a, .nav-link");e&&(e.style.transform="scale(0.95)",setTimeout(()=>{e.style.transform=""},100))})}enhanceNavigation(){document.querySelectorAll(".nav-link").forEach(t=>{t.addEventListener("click",e=>{t.classList.contains("nav-active")||(t.classList.add("loading-dots"),setTimeout(()=>{t.classList.remove("loading-dots")},2e3))})})}}class o{constructor(){this.themeManager=new t,this.router=new e,this.keyboardShortcuts=new i,this.performanceOptimizer=new n,this.typingAnimationManager=new s,this.interactionEnhancer=new a}}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",()=>{window.portfolioApp=new o}):window.portfolioApp=new o}()}();
